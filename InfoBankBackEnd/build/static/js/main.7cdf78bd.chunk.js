(this.webpackJsonpinfofrontend=this.webpackJsonpinfofrontend||[]).push([[0],{14:function(e,t,a){},45:function(e,t,a){e.exports=a.p+"static/media/venue.56af8b4f.jpg"},47:function(e,t,a){e.exports=a(78)},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),o=a.n(c),l=(a(52),a(5)),s=a.n(l),u=a(9),i=a(8),d=a(83),m=a(84),p=(a(14),a(16)),f=a.n(p),h="http://localhost:3004/api/infos",g=null,E={getAll:function(){var e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:g}},e.next=3,f.a.get(h,t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:g}},e.next=3,f.a.post(h,t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),poista:function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:g}},e.next=3,f.a.delete("".concat(h,"/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){g="bearer ".concat(e)}},v=function(e){var t=e.setData,a=Object(n.useState)(""),c=Object(i.a)(a,2),o=c[0],l=c[1],p=Object(n.useState)(""),f=Object(i.a)(p,2),h=f[0],g=f[1],v=Object(n.useState)(""),b=Object(i.a)(v,2),k=b[0],w=b[1],x=Object(n.useState)(""),C=Object(i.a)(x,2),y=C[0],j=C[1],O=Object(n.useState)(!0),L=Object(i.a)(O,2),N=L[0],S=L[1],U=function(){var e=Object(u.a)(s.a.mark((function e(a){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),""===o||""===h||""===k){e.next=13;break}return n={title:o,category:h,text:k,link:y,pic:N},e.next=5,E.create(n);case 5:return r=e.sent,e.next=8,E.getAll();case 8:c=e.sent,t(c),console.log(r),e.next=14;break;case 13:console.log("Dont send empty data");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadowBackground center effect6"},r.a.createElement(d.a,{onSubmit:U},r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Title:"),r.a.createElement(d.a.Control,{onChange:function(e){return l(e.target.value)},type:"text",placeholder:"Enter the title of info"})),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Category:"),r.a.createElement(d.a.Control,{onChange:function(e){return g(e.target.value)},type:"text",placeholder:"Enter the Category ex.Factory"})),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Write the info conserning the title"),r.a.createElement(d.a.Control,{onChange:function(e){return w(e.target.value)},as:"textarea",rows:"7"})),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"add a link to a picture (Leave empty not to add link)"),r.a.createElement(d.a.Control,{onChange:function(e){return j(e.target.value)},type:"text",placeholder:"Link here www.slush.org"})),r.a.createElement(m.a,{variant:"primary",type:"submit"},"Submit"),"Show as photo",r.a.createElement("input",{type:"radio",onClick:function(){return S(!1)},name:"gender",value:"male"}),"add as a Link",r.a.createElement("input",{type:"radio",onClick:function(){return S(!0)},name:"gender",value:"male"})))},b=a(19),k=a(24),w=a.n(k),x=function(e){var t=e.title,a=e.category,n=e.text,c=e.id,o=e.setData,l=e.user,i=e.word,d=e.link,p=e.pic,f=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.poista(c);case 2:return e.sent,e.next=5,E.getAll();case 5:t=e.sent,o(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=i.split(" ");return console.log(h),!1===l.admin?r.a.createElement("div",null,r.a.createElement("h1",null,t),r.a.createElement("h3",null,a),r.a.createElement("pre",{className:"pre"},r.a.createElement(w.a,{highlightClassName:"YourHighlightClass",searchWords:h,autoEscape:!0,textToHighlight:n})),!1===p&&r.a.createElement("img",{src:d,alt:"kuva"}),!0===p&&r.a.createElement("a",{href:d,target:"_blank",rel:"noopener noreferrer"},d)):!0===l.admin?r.a.createElement("div",null,r.a.createElement("h1",null,t),r.a.createElement("h3",null,a),r.a.createElement("pre",{className:"pre"},n),!1===p&&r.a.createElement("img",{src:d,alt:"kuva"}),!0===p&&r.a.createElement("a",{href:d,target:"_blank",rel:"noopener noreferrer"},d),!0===l.admin&&r.a.createElement(m.a,{variant:"danger",onClick:f},"Delete")):void 0},C=a(46),y=a(82),j=a(41),O=function(e,t){return e.sort((function(e,a){return e.title.toLowerCase().includes(t.toLowerCase())?-1:a.title.toLowerCase().includes(t.toLowerCase())?1:e.text.toLowerCase().includes(t.toLowerCase())?-1:a.text.toLowerCase().includes(t.toLowerCase())?1:0}))},L=function(e){var t=e.infotext;return r.a.createElement("div",null,r.a.createElement("div",{className:"kk2"},r.a.createElement("div",{className:"kuva"},r.a.createElement("pre",{className:"te pre"}," ",t))))},N=function(e){var t=e.setData,a=e.data,c=e.word,o=e.setWord,l=Object(n.useState)(!1),s=Object(i.a)(l,2),u=s[0];s[1];return r.a.createElement("div",{className:"search"},r.a.createElement(d.a.Group,{as:y.a},r.a.createElement(j.a,{sm:"11"},r.a.createElement(d.a.Control,{type:"text",onChange:function(e){o(e.target.value);var n=Object(C.a)(a),r=O(n,c);t(r)},placeholder:"Search"})),r.a.createElement(d.a.Label,{column:!0,sm:"1"})),!0===u&&r.a.createElement(L,{infotext:"introductions how to use infosaudddd dddsddddddddddddddr dasdsads a dasdsad s                  -      introductions how to use infosaudddd dddsddddddddddddddr dasdsads a dasdsad sintroductions how to use infosaudddd dddsddddddddddddddr dasdsads a dasdsad s"}))},S=function(e){var t=e.setUsername,a=e.setPassword,c=e.handeLogin,o=e.handleSignUp,l=Object(n.useState)(!1),s=Object(i.a)(l,2),u=s[0],p=s[1];return u?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"shadowBackground3"},r.a.createElement(d.a.Group,{as:y.a},r.a.createElement(d.a.Label,{column:!0,sm:"4"},"Username:"),r.a.createElement(j.a,{sm:"8"},r.a.createElement(d.a.Control,{type:"text",onChange:function(e){var a=e.target;return t(a.value)},placeholder:"username"}))),r.a.createElement(d.a.Group,{as:y.a},r.a.createElement(d.a.Label,{column:!0,sm:"4"},"Password:"),r.a.createElement(j.a,{sm:"8"},r.a.createElement(d.a.Control,{type:"password",onChange:function(e){var t=e.target;return a(t.value)},placeholder:"Password"}))),r.a.createElement(m.a,{className:"primary",onClick:o},"Sign Up")),r.a.createElement("div",{className:"text--center mt-4"},r.a.createElement("p",null,"Back to ",r.a.createElement("a",{className:"badge badge-primary text-white signup",onClick:function(){return p(!1)}},"Login")))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"shadowBackground3"},r.a.createElement(d.a.Group,{as:y.a},r.a.createElement(d.a.Label,{column:!0,sm:"4"},"Username:"),r.a.createElement(j.a,{sm:"8"},r.a.createElement(d.a.Control,{type:"text",onChange:function(e){var a=e.target;return t(a.value)},placeholder:"username"}))),r.a.createElement(d.a.Group,{as:y.a},r.a.createElement(d.a.Label,{column:!0,sm:"4"},"Password:"),r.a.createElement(j.a,{sm:"8"},r.a.createElement(d.a.Control,{type:"password",onChange:function(e){var t=e.target;return a(t.value)},placeholder:"Password"}))),r.a.createElement(m.a,{className:"primary",onClick:c},"Log in")),r.a.createElement("div",{className:"text--center mt-4"},r.a.createElement("p",null,"Don't have an account? ",r.a.createElement("a",{className:"badge badge-primary text-white signup",onClick:function(){return p(!0)}},"Sign Up here."))))},U={login:function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("".concat("http://localhost:3004/api","/login"),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signUp:function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("".concat("http://localhost:3004/api","/users"),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D=a(45),A=a.n(D),P=function(e){var t=e.handleClose,a=e.show;return r.a.createElement("div",{className:"kk",onClick:function(){return t(!a)}},r.a.createElement("div",{className:"kuva"},r.a.createElement("img",{src:A.a,className:"kuva"}),r.a.createElement(m.a,{variant:"danger",className:"nappi2",onClick:function(){return t(!a)}},"Exit")))};var G=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),d=l[0],p=l[1],f=Object(n.useState)(""),h=Object(i.a)(f,2),g=h[0],k=h[1],w=Object(n.useState)(null),C=Object(i.a)(w,2),y=C[0],j=C[1],O=Object(n.useState)(!1),L=Object(i.a)(O,2),D=L[0],A=L[1],G=Object(n.useState)(!1),I=Object(i.a)(G,2),B=I[0],T=I[1],W=Object(n.useState)(""),F=Object(i.a)(W,2),J=F[0],z=F[1];Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=sessionStorage.getItem("LoggedInfoUser"))){e.next=9;break}return a=JSON.parse(t),j(a),E.setToken(a.token),e.next=7,E.getAll();case 7:n=e.sent,c(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var H=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"!==typeof t&&t.preventDefault(),e.prev=1,e.next=4,U.login({username:d,password:g});case 4:return a=e.sent,console.log(a.token),sessionStorage.setItem("LoggedInfoUser",JSON.stringify(a)),E.setToken(a.token),j(a),p(""),k(""),console.log("Logged in"),e.next=14,E.getAll();case 14:n=e.sent,c(n),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),alert("Login failed"),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,U.signUp({username:d,password:g});case 4:return e.sent,e.next=7,H("");case 7:return e.next=9,alert("Succesfully created user ".concat(d));case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),alert("Signup failed"),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){console.log("hello"),j(null),sessionStorage.clear()},q=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(y.token);case 3:alert("API token copied."),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert("Something went wrong :(");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),K=a.map((function(e){return r.a.createElement("div",{key:e.id,className:"shadowBackground2"},r.a.createElement(x,{word:J,title:e.title,user:y,category:e.category,text:e.text,id:e.id,setData:c,link:e.link,pic:e.pic}))})),M=function(){return T(!B)},Q=function(){return T(!B)};return null==y?r.a.createElement("div",{className:"keskita"},null===y?r.a.createElement("div",null,r.a.createElement("h1",{className:"text--center"},"Welcome to the info bank ",(new Date).getFullYear(),"!"),r.a.createElement(S,{setUsername:p,handeLogin:H,handleSignUp:Y,setPassword:k,click:D,setClick:A})):r.a.createElement(m.a,{onClick:_},"Log out username: ",y.username)):!1===y.admin?r.a.createElement("div",null,!0===B&&r.a.createElement(P,{handleClose:M,show:B}),null===y?r.a.createElement(S,{setUsername:p,handeLogin:H,handleSignUp:Y,setPassword:k,click:D,setClick:A}):r.a.createElement(m.a,{onClick:_},"Log out username: ",y.username),r.a.createElement("div",{className:"sticky"},r.a.createElement(N,{data:a,setData:c,word:J,setWord:z})),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{className:"btn btn-primary text-center",onClick:q},"Copy API token to clipboard")),K,r.a.createElement(b.c,{icon:"map-marked-alt",onClick:Q,className:"map fa fa-camera-retro fa-3x"}),console.log(y)):r.a.createElement("div",null,!0===B&&r.a.createElement(P,{handleClose:M,show:B}),null===y?r.a.createElement(S,{setUsername:p,handeLogin:H,setPassword:k,click:D,setClick:A}):r.a.createElement(m.a,{onClick:_},"Log out username: ",y.username),null!==y&&r.a.createElement(v,{setData:c}),r.a.createElement("div",{className:"sticky"},r.a.createElement(N,{data:a,setData:c,word:J,setWord:z})),r.a.createElement("button",{className:"btn btn-primary text-center",onClick:q},"Copy API token to clipboard"),K,console.log(y),r.a.createElement(b.c,{icon:"map-marked-alt",onClick:Q,className:"map fa fa-camera-retro fa-3x"}))};o.a.render(r.a.createElement(G,null),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.7cdf78bd.chunk.js.map